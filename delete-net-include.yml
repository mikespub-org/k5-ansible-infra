---
#
# This file is an include to loop with_items over two tasks 
#  to create the network and subnet
# note the "outer_item" to pull in the with_items from the calling playbook
#

        - name: "Delete Subnet"
          # https://docs.ansible.com/ansible/os_subnet_module.html
          os_subnet:
            state: absent
            network_name: "{{ outer_item.name }}"
            name: "{{ outer_item.subnet }}"
          no_log: True

        - name: "Delete Network"
          # https://docs.ansible.com/ansible/os_network_module.html
          os_network:
            state: absent
            name: "{{ outer_item.name }}"
          no_log: True
